<html>

<head>
  <title>Express</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
</head>

<body>
  <h1>Express</h1>
  <p>Welcome to Express</p>

  <div id="users">

  </div>
</body>
<script>
  fetch('http://localhost:3000/users/users')
      .then(response => response.json())
      .then(data =>{

        let table="<table class='table table-bordered table-striped'><tr ><th>ID</th><th>USERNAME</th><th>EMAIL</th><th>ROLE</th><th>PASSWORD</th><th>ACTION</th></tr>";
        
        data.forEach(user => {
          table+="<tr><th>"+user["id"]+"</th><th>"+ user["username"] +"</th><th>"+user["email"] +"</th><th>"+user["role"] +"</th><th>"+user["password"] +"</th>";
          table+="<td><button class='btn btn-danger remove' id=" + user["id"] +"> Remove</button ></td>";
          table+="</tr>";
        });
        table+="</table>";
        document.getElementById('users').innerHTML = table;
      });
      $(document).on("click", ".remove", function () {
          var id = $(this).attr("id");
          
        // ES6 class
        class DeleteHTTP {

          // Make an HTTP PUT Request
          async delete(url) {

            // Awaiting fetch which contains 
            // method, headers and content-type
            const response = await fetch(url, {
              method: 'GET',
              headers: {
                'Content-type': 'application/json'
              }
            });

            // Awaiting for the resource to be deleted
            const resData = 'resource deleted...';

            // Return response data 
            return resData;
          }
        }
        
        // Instantiating new EasyHTTP class
        const http = new DeleteHTTP;

        // Update Post
          http.delete('http://localhost:3000/users')

          // Resolving promise for response data
          .then(data => console.log(data))

          // Resolving promise for error
          .catch(err => console.log(err));
        });
</script>
</html>
